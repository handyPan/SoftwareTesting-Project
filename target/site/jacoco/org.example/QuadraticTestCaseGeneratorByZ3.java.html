<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>QuadraticTestCaseGeneratorByZ3.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">SYSC5807Project</a> &gt; <a href="index.source.html" class="el_package">org.example</a> &gt; <span class="el_source">QuadraticTestCaseGeneratorByZ3.java</span></div><h1>QuadraticTestCaseGeneratorByZ3.java</h1><pre class="source lang-java linenums">package org.example;

import com.microsoft.z3.*;
import java.io.FileWriter;
import java.io.IOException;

<span class="nc" id="L7">public class QuadraticTestCaseGeneratorByZ3 {</span>

    public static void main(String[] args) {
<span class="nc" id="L10">        try (Context ctx = new Context(); FileWriter writer = new FileWriter(&quot;src\\main\\resources\\QuadraticZ3.csv&quot;)) {</span>
<span class="nc" id="L11">            writer.write(&quot;a,b,c\n&quot;);</span>

<span class="nc" id="L13">            int testCasesPerType = 3;</span>

            // Case: All zero coefficients (not a valid quadratic or linear)
<span class="nc" id="L16">            generateCases(ctx, writer, testCasesPerType, &quot;coefficientsAllZero&quot;,</span>
<span class="nc" id="L17">                            ctx.mkAnd(ctx.mkEq(ctx.mkRealConst(&quot;a&quot;), ctx.mkReal(&quot;0&quot;)),</span>
<span class="nc" id="L18">                                        ctx.mkEq(ctx.mkRealConst(&quot;b&quot;), ctx.mkReal(&quot;0&quot;)),</span>
<span class="nc" id="L19">                                        ctx.mkEq(ctx.mkRealConst(&quot;c&quot;), ctx.mkReal(&quot;0&quot;))));</span>
            // Case: a == 0
<span class="nc" id="L21">            generateCases(ctx, writer, testCasesPerType, &quot;aEqualsZero&quot;,</span>
<span class="nc" id="L22">                    ctx.mkEq(ctx.mkRealConst(&quot;a&quot;), ctx.mkReal(&quot;0&quot;)));</span>

            // Case: b == 0
<span class="nc" id="L25">            generateCases(ctx, writer, testCasesPerType, &quot;bEqualsZero&quot;,</span>
<span class="nc" id="L26">                    ctx.mkEq(ctx.mkRealConst(&quot;b&quot;), ctx.mkReal(&quot;0&quot;)));</span>

            // Case: c == 0
<span class="nc" id="L29">            generateCases(ctx, writer, testCasesPerType, &quot;cEqualsZero&quot;,</span>
<span class="nc" id="L30">                    ctx.mkEq(ctx.mkRealConst(&quot;c&quot;), ctx.mkReal(&quot;0&quot;)));</span>

            // Case: large coefficients
<span class="nc" id="L33">            generateCases(ctx, writer, testCasesPerType, &quot;largeCoefficients&quot;,</span>
<span class="nc" id="L34">                    ctx.mkAnd(ctx.mkGt(ctx.mkRealConst(&quot;a&quot;), ctx.mkReal(&quot;1e9&quot;)),</span>
<span class="nc" id="L35">                                ctx.mkGt(ctx.mkRealConst(&quot;b&quot;), ctx.mkReal(&quot;1e9&quot;)),</span>
<span class="nc" id="L36">                                ctx.mkGt(ctx.mkRealConst(&quot;c&quot;), ctx.mkReal(&quot;1e9&quot;))));</span>

            // Case: two real roots, b^2 - 4ac &gt; 0
<span class="nc" id="L39">            generateCases(ctx, writer, testCasesPerType, &quot;twoRealRoots&quot;,</span>
<span class="nc" id="L40">                    ctx.mkAnd(ctx.mkNot(ctx.mkEq(ctx.mkRealConst(&quot;a&quot;), ctx.mkReal(&quot;0&quot;))),</span>
<span class="nc" id="L41">                            ctx.mkGt(ctx.mkSub(ctx.mkMul(ctx.mkRealConst(&quot;b&quot;), ctx.mkRealConst(&quot;b&quot;)),</span>
<span class="nc" id="L42">                                    ctx.mkMul(ctx.mkReal(4), ctx.mkRealConst(&quot;a&quot;), ctx.mkRealConst(&quot;c&quot;))), ctx.mkReal(&quot;0&quot;))));</span>

            // Case: one real root, b^2 - 4ac = 0
<span class="nc" id="L45">            generateCases(ctx, writer, testCasesPerType, &quot;twoRealRoots&quot;,</span>
<span class="nc" id="L46">                    ctx.mkAnd(ctx.mkNot(ctx.mkEq(ctx.mkRealConst(&quot;a&quot;), ctx.mkReal(&quot;0&quot;))),</span>
<span class="nc" id="L47">                            ctx.mkEq(ctx.mkSub(ctx.mkMul(ctx.mkRealConst(&quot;b&quot;), ctx.mkRealConst(&quot;b&quot;)),</span>
<span class="nc" id="L48">                                    ctx.mkMul(ctx.mkReal(4), ctx.mkRealConst(&quot;a&quot;), ctx.mkRealConst(&quot;c&quot;))), ctx.mkReal(&quot;0&quot;))));</span>

            // Case: two complex roots, b^2 - 4ac &lt; 0
<span class="nc" id="L51">            generateCases(ctx, writer, testCasesPerType, &quot;twoRealRoots&quot;,</span>
<span class="nc" id="L52">                    ctx.mkAnd(ctx.mkNot(ctx.mkEq(ctx.mkRealConst(&quot;a&quot;), ctx.mkReal(&quot;0&quot;))),</span>
<span class="nc" id="L53">                            ctx.mkLt(ctx.mkSub(ctx.mkMul(ctx.mkRealConst(&quot;b&quot;), ctx.mkRealConst(&quot;b&quot;)),</span>
<span class="nc" id="L54">                                    ctx.mkMul(ctx.mkReal(4), ctx.mkRealConst(&quot;a&quot;), ctx.mkRealConst(&quot;c&quot;))), ctx.mkReal(&quot;0&quot;))));</span>

            // Case: subtractive cancellation (b² &gt;&gt; 4ac)
<span class="nc" id="L57">            generateCases(ctx, writer, testCasesPerType, &quot;subtractiveCancellation&quot;,</span>
<span class="nc" id="L58">                    ctx.mkAnd(ctx.mkNot(ctx.mkEq(ctx.mkRealConst(&quot;a&quot;), ctx.mkReal(&quot;0&quot;))),</span>
<span class="nc" id="L59">                            ctx.mkGt(ctx.mkMul(ctx.mkRealConst(&quot;b&quot;), ctx.mkRealConst(&quot;b&quot;)),</span>
<span class="nc" id="L60">                                        ctx.mkMul(ctx.mkReal(&quot;1e8&quot;), ctx.mkRealConst(&quot;a&quot;), ctx.mkRealConst(&quot;c&quot;)))));</span>

            // Case: b != 0, ac = 0
<span class="nc" id="L63">            generateCases(ctx, writer, testCasesPerType, &quot;bIsNotZEROacIsZero&quot;,</span>
<span class="nc" id="L64">                    ctx.mkAnd(ctx.mkNot(ctx.mkEq(ctx.mkRealConst(&quot;a&quot;), ctx.mkReal(&quot;0&quot;))),</span>
<span class="nc" id="L65">                            ctx.mkNot(ctx.mkEq(ctx.mkRealConst(&quot;b&quot;), ctx.mkReal(&quot;0&quot;))),</span>
<span class="nc" id="L66">                            ctx.mkEq(ctx.mkMul(ctx.mkRealConst(&quot;a&quot;), ctx.mkRealConst(&quot;c&quot;)), ctx.mkReal(&quot;0&quot;))));</span>

            // Case: Extreme Small Discriminant
<span class="nc" id="L69">            generateCases(ctx, writer, testCasesPerType, &quot;extremeSmallDiscriminant&quot;,</span>
<span class="nc" id="L70">                    ctx.mkAnd(ctx.mkNot(ctx.mkEq(ctx.mkRealConst(&quot;a&quot;), ctx.mkReal(&quot;0&quot;))),</span>
<span class="nc" id="L71">                            ctx.mkLt(ctx.mkSub(ctx.mkMul(ctx.mkRealConst(&quot;b&quot;), ctx.mkRealConst(&quot;b&quot;)),</span>
<span class="nc" id="L72">                                                ctx.mkMul(ctx.mkReal(4), ctx.mkRealConst(&quot;a&quot;), ctx.mkRealConst(&quot;c&quot;))),</span>
<span class="nc" id="L73">                                    ctx.mkReal(&quot;1e-8&quot;)),</span>
<span class="nc" id="L74">                            ctx.mkGt(ctx.mkSub(ctx.mkMul(ctx.mkRealConst(&quot;b&quot;), ctx.mkRealConst(&quot;b&quot;)),</span>
<span class="nc" id="L75">                                                ctx.mkMul(ctx.mkReal(4), ctx.mkRealConst(&quot;a&quot;), ctx.mkRealConst(&quot;c&quot;))),</span>
<span class="nc" id="L76">                                    ctx.mkReal(&quot;0&quot;))));</span>

<span class="nc" id="L78">            generateEdgeCases(writer);</span>

<span class="nc" id="L80">            System.out.println(&quot;CSV content written to src\\main\\resources\\QuadraticZ3.csv&quot;);</span>

<span class="nc" id="L82">        } catch (IOException | Z3Exception e) {</span>
<span class="nc" id="L83">            e.printStackTrace();</span>
<span class="nc" id="L84">        }</span>
<span class="nc" id="L85">    }</span>

    private static void generateCases(Context ctx, FileWriter writer, int count, String label, BoolExpr constraint)
            throws IOException {
<span class="nc bnc" id="L89" title="All 2 branches missed.">        for (int i = 0; i &lt; count; i++) {</span>
<span class="nc" id="L90">            Solver solver = ctx.mkSolver();</span>

<span class="nc" id="L92">            RealExpr a = ctx.mkRealConst(&quot;a&quot;);</span>
<span class="nc" id="L93">            RealExpr b = ctx.mkRealConst(&quot;b&quot;);</span>
<span class="nc" id="L94">            RealExpr c = ctx.mkRealConst(&quot;c&quot;);</span>

            // Bound variables to reasonable ranges
<span class="nc" id="L97">            solver.add(ctx.mkAnd(</span>
<span class="nc" id="L98">                    ctx.mkGe(a, ctx.mkReal(&quot;-1e308&quot;)), ctx.mkLe(a, ctx.mkReal(&quot;1e308&quot;)),</span>
<span class="nc" id="L99">                    ctx.mkGe(b, ctx.mkReal(&quot;-1e308&quot;)), ctx.mkLe(b, ctx.mkReal(&quot;1e308&quot;)),</span>
<span class="nc" id="L100">                    ctx.mkGe(c, ctx.mkReal(&quot;-1e308&quot;)), ctx.mkLe(c, ctx.mkReal(&quot;1e308&quot;))</span>
            ));

            // Apply root condition
<span class="nc" id="L104">            solver.add(constraint);</span>

            // For all cases except linear, ensure a ≠ 0
<span class="nc bnc" id="L107" title="All 2 branches missed.">            if (!label.equals(&quot;LINEAR&quot;)) {</span>
<span class="nc" id="L108">                solver.add(ctx.mkNot(ctx.mkEq(a, ctx.mkReal(&quot;0&quot;))));</span>
            }

<span class="nc bnc" id="L111" title="All 2 branches missed.">            if (solver.check() == Status.SATISFIABLE) {</span>
<span class="nc" id="L112">                Model model = solver.getModel();</span>
<span class="nc" id="L113">                String aVal = model.eval(a, false).toString();</span>
<span class="nc" id="L114">                String bVal = model.eval(b, false).toString();</span>
<span class="nc" id="L115">                String cVal = model.eval(c, false).toString();</span>
<span class="nc" id="L116">                writer.write(aVal + &quot;,&quot; + bVal + &quot;,&quot; + cVal + &quot;\n&quot;);</span>
            }
        }
<span class="nc" id="L119">    }</span>

    private static void generateEdgeCases(FileWriter writer) throws IOException {
<span class="nc" id="L122">        String[] values = { &quot;-1&quot;, &quot;0&quot;, &quot;1&quot;, &quot;1e-100&quot;, &quot;1e100&quot;, &quot;-1e-100&quot;, &quot;-1e100&quot; };</span>

<span class="nc bnc" id="L124" title="All 2 branches missed.">        for (String a : values) {</span>
<span class="nc bnc" id="L125" title="All 2 branches missed.">            for (String b : values) {</span>
<span class="nc bnc" id="L126" title="All 2 branches missed.">                for (String c : values) {</span>
<span class="nc" id="L127">                    writer.write(a + &quot;,&quot; + b + &quot;,&quot; + c + &quot;\n&quot;);</span>
                }
            }
        }
<span class="nc" id="L131">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>